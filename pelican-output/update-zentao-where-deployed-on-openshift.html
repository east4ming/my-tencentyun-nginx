
<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.EWhisper.cn/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://www.EWhisper.cn/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://www.EWhisper.cn/theme/font-awesome/css/font-awesome.min.css">

    <link href="https://www.EWhisper.cn/static/custom.css" rel="stylesheet">


    <link href="https://www.EWhisper.cn/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="ä¸ªäººæŠ€æœ¯åˆ†äº« RSS">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">


    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="ä¸œé£å¾®é¸£" />
<meta name="description" content="OpenShiftä¸Šç¦…é“çš„å‡çº§æ–¹æ¡ˆ. ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ å¤§æ­¥éª¤: å¤‡ä»½; é•œåƒé‡åˆ¶å’Œå‡çº§." />
<meta name="keywords" content="é¡¹ç›®ç®¡ç†, openshift, docker">

<meta property="og:site_name" content="ä¸ªäººæŠ€æœ¯åˆ†äº«"/>
<meta property="og:title" content="OpenShiftä¸Šç¦…é“å‡çº§æ–¹æ¡ˆ"/>
<meta property="og:description" content="OpenShiftä¸Šç¦…é“çš„å‡çº§æ–¹æ¡ˆ. ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ å¤§æ­¥éª¤: å¤‡ä»½; é•œåƒé‡åˆ¶å’Œå‡çº§."/>
<meta property="og:locale" content="zh_CN"/>
<meta property="og:url" content="https://www.EWhisper.cn/update-zentao-where-deployed-on-openshift.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-07-29 18:00:00+08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://www.EWhisper.cn/author/dong-feng-wei-ming.html">
<meta property="article:section" content="DevOps"/>
<meta property="article:tag" content="é¡¹ç›®ç®¡ç†"/>
<meta property="article:tag" content="openshift"/>
<meta property="article:tag" content="docker"/>
<meta property="og:image" content="//s.gravatar.com/avatar/7c743bc6ac83171e35a5aa8bd66cc1ea?s=120">

  <title>ä¸ªäººæŠ€æœ¯åˆ†äº« &ndash; OpenShiftä¸Šç¦…é“å‡çº§æ–¹æ¡ˆ</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://www.EWhisper.cn">
        <img src="//s.gravatar.com/avatar/7c743bc6ac83171e35a5aa8bd66cc1ea?s=120" alt="ä¸ªäººæŠ€æœ¯åˆ†äº«" title="ä¸ªäººæŠ€æœ¯åˆ†äº«">
      </a>
      <h1><a href="https://www.EWhisper.cn">ä¸ªäººæŠ€æœ¯åˆ†äº«</a></h1>

<p>Focus on Python/Java/DevOps/Observability</p>
      <nav>
        <ul class="list">
          <li><a href="https://www.EWhisper.cn/pages/about.html#about">About</a></li>
          <li><a href="https://www.EWhisper.cn/pages/contact.html#contact">Contact</a></li>

          <li><a href="http://beian.miit.gov.cn" target="_blank">æ²ªICPå¤‡19007314å·-1</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-wechat" href="/images/wechat_paycode.png" target="_blank"><i class="fa fa-wechat"></i></a></li>
        <li><a class="sc-envelope-o" href="mailto:cuikaidong@foxmail.com" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
        <li><a class="sc-reddit" href="https://www.jianshu.com/u/0f08daeaa5a9" target="_blank"><i class="fa fa-reddit"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/å‡¯ä¸œ-å´”-136128116/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-weibo" href="https://weibo.com/long5to2gf" target="_blank"><i class="fa fa-weibo"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://www.EWhisper.cn">ä¸»é¡µ</a>

      <a href="/archives/index.html">å­˜æ¡£</a>
      <a href="/categories.html">ç±»åˆ«</a>
      <a href="/tags.html">æ ‡ç­¾</a>
      <a href="/authors.html">ä½œè€…</a>


      <a href="https://www.EWhisper.cn/feeds/all.rss.xml">RSSè®¢é˜…</a>
    </nav>

<article class="single">
  <header>
    <h1 id="update-zentao-where-deployed-on-openshift">OpenShiftä¸Šç¦…é“å‡çº§æ–¹æ¡ˆ</h1>
    <p>
      åœ¨ 2019-07-29 Monday å‘å¸ƒäº <a href="https://www.EWhisper.cn/category/devops.html">DevOps</a> åˆ†ç±»

        &#8226; 2 min read
    </p>
  </header>


  <div>
    <div class="toc">
<ul>
<li><a href="#_1">æ¦‚è¿°</a></li>
<li><a href="#_2">å¤‡ä»½</a><ul>
<li><a href="#_3">é…ç½®æ–‡ä»¶ã€ä»£ç å’Œé™„ä»¶çš„å¤‡ä»½</a></li>
<li><a href="#_4">æ•°æ®åº“çš„å¤‡ä»½</a></li>
</ul>
</li>
<li><a href="#_5">å‡çº§</a><ul>
<li><a href="#dockerfile">æ›´æ–°Dockerfileå’Œé•œåƒ</a></li>
<li><a href="#docker">ä¸Šä¼ å¹¶å¯¼å…¥æ–°çš„dockeré•œåƒ</a></li>
<li><a href="#_6">æ–°éƒ¨ç½²</a></li>
<li><a href="#_7">æ‰§è¡Œå‡çº§ç¨‹åº</a></li>
</ul>
</li>
<li><a href="#_8">å›é¡¾å’Œæ€»ç»“</a></li>
</ul>
</div>
<h2 id="_1">æ¦‚è¿°<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>åœ¨<a href="https://www.EWhisper.cn/deploy-app-with-openshift-in-enterprise-env.html">ä¹‹å‰çš„æ–‡ç« </a>ä¸­, ä»‹ç»äº†æŠŠç¦…é“éƒ¨ç½²åˆ°ä¼ä¸šæµ‹è¯•ç¯å¢ƒçš„è¿‡ç¨‹. è€Œè¿™æ¬¡æ˜¯è¦å¯¹ç¦…é“è¿›è¡Œä¸€ä¸‹å‡çº§, å…¶å®ä¸¥æ ¼è¯´æ¥ä¸ä»…ä»…å‡çº§, è€Œæ˜¯æŠŠ: å¼€æºç‰ˆç¦…é“11.5 å‡çº§ä¸º ä¼ä¸šç‰ˆç¦…é“3.3.  æœ¬æ–‡è®°å½•äº†å‡çº§çš„å…¨è¿‡ç¨‹.</p>
<p>å…¶å®æ‰€æœ‰çš„å‡çº§ä¸­åŒ…å«çš„æœ€é‡è¦çš„æ˜¯ä»¥ä¸‹å‡ æ­¥:</p>
<ol>
<li>å¤‡ä»½</li>
<li>å‡çº§</li>
<li>éªŒè¯</li>
</ol>
<h2 id="_2">å¤‡ä»½<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<blockquote>
<p><img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"> å¤‡æ³¨:</p>
<p>å…¶å®å¯ä»¥ä¸€é”®è‡ªåŠ¨åŒ–å¤‡ä»½çš„. ä½äºç¦…é“ç½‘é¡µçš„: åå° -&gt; æ•°æ® -&gt; å¼€å§‹å¤‡ä»½</p>
</blockquote>
<h3 id="_3">é…ç½®æ–‡ä»¶ã€ä»£ç å’Œé™„ä»¶çš„å¤‡ä»½<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ul>
<li>é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨zentao/config/my.php</li>
<li>é™„ä»¶å­˜æ”¾åœ¨zentao/www/data/ç›®å½•ä¸‹é¢ã€‚</li>
<li>ä¿®æ”¹çš„ä»£ç ä¹Ÿéƒ½æ”¾åœ¨zentaoç›®å½•ä¸‹é¢ã€‚</li>
</ul>
<p>å› æ­¤å¤‡ä»½é…ç½®æ–‡ä»¶ã€ä»£ç å’Œé™„ä»¶çš„æ–¹æ³•å°±æ˜¯å°†æ•´ä¸ªzentaoç›®å½•å¤‡ä»½å³å¯ã€‚</p>
<p>å¯¹äºæœ¬æ¬¡OpenShift, æ“ä½œå¦‚ä¸‹:</p>
<div class="highlight"><pre><span></span><span class="c1"># æŸ¥çœ‹ç¦…é“podè¿è¡Œçš„èŠ‚ç‚¹</span>
oc project zentao  <span class="c1"># åˆ‡æ¢åˆ°zentaoé¡¹ç›®</span>
oc get pod  <span class="c1"># æŸ¥çœ‹zentao podçš„name</span>
oc describe pod &lt;pod_name&gt;  <span class="c1"># æŸ¥çœ‹zentao å¯¹åº”podçš„è¯¦ç»†ä¿¡æ¯</span>
<span class="c1"># è¾“å‡ºå¦‚ä¸‹:</span>
<span class="c1"># Node:  xxxxx-node02.xxxxx.com.cn/10.X.X.X</span>
<span class="c1"># Mounts:</span>
<span class="c1">#  /app/zentaopms from zentao-volume-1 (rw)</span>
<span class="c1">#  /var/lib/mysql from zentao-volume-2 (rw)</span>
<span class="c1"># Volumes:</span>
<span class="c1">#  zentao-volume-1:</span>
<span class="c1">#    ClaimName: zentao-pms</span>
<span class="c1">#  zentao-volume-2:</span>
<span class="c1">#    ClaimName: zentao-mysql-pvc</span>
oc get pvc
<span class="c1"># å¯ä»¥çœ‹åˆ°ç»‘å®šçš„PVæ˜¯: zentao-pms-volume å’Œzentao-mysql-volume</span>
oc describe pv zentao-pms-volume zentao-mysql-volume
<span class="c1"># å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å…±äº«å­˜å‚¨:</span>
<span class="c1"># Server: 10.X.X.X</span>
<span class="c1"># Path: /vol/Thxxxxxx/zentao-pms</span>
<span class="c1"># Path: /vol/Thxxxxxx/zentao-mysql</span>

<span class="c1"># åœ¨node2ä¸Šæ‰§è¡Œ:</span>
df -h <span class="p">|</span> grep zentao
<span class="c1"># è¾“å‡ºå¦‚ä¸‹:</span>
<span class="c1"># 10.X.X.X://vol/Thxxxxxx/zentao-pms  50G  3.0G  48G  6%  /var/lib/origin/openshift.local.volumes/pods/6340...-...-97cd/volumes/kubernetes.io~nfs/zentao-pms-volume</span>
<span class="c1"># 10.X.X.X://vol/Thxxxxxx/zentao-mysql  50G  3.0G  48G  6%  /var/lib/origin/openshift.local.volumes/pods/6340...-...-97cd/volumes/kubernetes.io~nfs/zentao-mysql-volume</span>
<span class="c1"># å¤‡ä»½</span>
<span class="nb">cd</span> /var/lib/origin/openshift.local.volumes/pods/6340...-...-97cd/volumes/kubernetes.io~nfs/zentao-pms-volume
tar -cvzf /root/zentao-pms-volume.tgz ./zentao-pms-volume/
</pre></div>


<h3 id="_4">æ•°æ®åº“çš„å¤‡ä»½<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>å¯ä»¥ä½¿ç”¨mysqlæä¾›çš„ç®¡ç†å·¥å…·ï¼Œå°†æ•°æ®åº“å¯¼å‡ºï¼š <code>mysqldump -u xxx -p zentao &gt; zentao.sql</code>ï¼Œå…¶ä¸­çš„useræ¢æˆå®é™…çš„ç”¨æˆ·ã€‚</p>
<h2 id="_5">å‡çº§<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="dockerfile">æ›´æ–°Dockerfileå’Œé•œåƒ<a class="headerlink" href="#dockerfile" title="Permanent link">&para;</a></h3>
<p>Dockerfileæ›´æ–°å¦‚ä¸‹:</p>
<div class="highlight"><pre><span></span><span class="k">FROM</span><span class="s"> ubuntu:16.04</span>
<span class="k">MAINTAINER</span><span class="s"> yidong &lt;yidong@cnezsoft.com&gt;</span>

<span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y apache2 mariadb-server php php-curl php-gd php-ldap php-mbstring php-mcrypt php-mysql php-xml php-zip php-cli php-json curl unzip libapache2-mod-php locales

<span class="k">ENV</span> <span class="nv">LANG</span><span class="o">=</span><span class="s2">&quot;en_US.UTF8&quot;</span>
<span class="k">ENV</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="s2">&quot;123456&quot;</span>
<span class="k">RUN</span> <span class="nb">echo</span> -e <span class="s2">&quot;LANG=\&quot;en_US.UTF-8\&quot;\nLANGUAGE=\&quot;en_US:en\&quot;&quot;</span> &gt; /etc/default/locale <span class="o">&amp;&amp;</span> locale-gen en_US.UTF-8

<span class="k">RUN</span> mkdir -p /app/zentaopms
<span class="k">COPY</span> docker-entrypoint.sh /app
<span class="c">#RUN random=`date +%s`; curl http://cdn.zentaopm.com/latest/zentao.zip?rand=$random -o /var/www/zentao.zip</span>
<span class="c">#RUN cd /var/www/ &amp;&amp; unzip -q zentao.zip &amp;&amp; rm zentao.zip</span>
<span class="k">COPY</span> ./zentaopms/ /var/www/zentaopms/
<span class="k">RUN</span> a2enmod rewrite

<span class="k">RUN</span> rm -rf /etc/apache2/sites-enabled/000-default.conf /var/lib/mysql/*
<span class="k">RUN</span> sed -i <span class="s1">&#39;1i ServerName 127.0.0.1&#39;</span> /etc/apache2/apache2.conf
<span class="k">COPY</span> config/apache.conf /etc/apache2/sites-enabled/000-default.conf
<span class="k">COPY</span> config/ioncube_loader_lin_7.0.so /usr/lib/php/20151012/ioncube_loader_lin_7.0.so
<span class="k">COPY</span> config/00-ioncube.ini /etc/php/7.0/apache2/conf.d/
<span class="k">COPY</span> config/00-ioncube.ini /etc/php/7.0/cli/conf.d/

<span class="k">VOLUME</span><span class="s"> /app/zentaopms /var/lib/mysql</span>
<span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&quot;/app/docker-entrypoint.sh&quot;</span><span class="p">]</span>
</pre></div>


<blockquote>
<p><img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"> å¤‡æ³¨:</p>
<p>ä¼ä¸šç‰ˆ3.3çš„åŒ…å’Œå¯¹åº”çš„è¯•ç”¨license, ç¦…é“çš„æŠ€æœ¯æ”¯æŒå·²ç»æä¾›ç»™æˆ‘äº†.</p>
<p>æˆ‘è§£å‹åç»Ÿä¸€æ”¾åˆ°äº†<code>./zentaopms/</code>Â ä¸‹</p>
</blockquote>
<p>ä½¿ç”¨<code>Dockerfile</code> æ„å»ºdockeré•œåƒå¹¶æµ‹è¯•:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> docker_zentao
docker build -t zentao:3.3-ent .

<span class="c1"># æµ‹è¯•</span>
docker run --name zentao-ent-test -p <span class="m">8000</span>:80 -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="m">123456</span> -d zentao:3.3-ent  <span class="c1"># åå°è¿è¡Œè¯¥dockerå®¹å™¨</span>
docker ps  <span class="c1"># æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ, æœ‰æ— crash</span>
docker stop zentao-ent-test  <span class="c1"># æµ‹è¯•å®Œæ¯•, åœæ­¢è¯¥å®¹å™¨</span>
</pre></div>


<p>å°†é•œåƒå¯¼å‡ºä¸ºtaråŒ…:</p>
<div class="highlight"><pre><span></span>docker save -o docker_zentao.tar zentao
</pre></div>


<h3 id="docker">ä¸Šä¼ å¹¶å¯¼å…¥æ–°çš„dockeré•œåƒ<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h3>
<p>å…ˆftpä¼ ä¸Šå». ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:</p>
<div class="highlight"><pre><span></span>docker load -i docker_ent_zentao.tar
docker push txocp-registry.example.com/ewhisper/zentao:3.3-ent
</pre></div>


<blockquote>
<p><img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"> å¤‡æ³¨:</p>
<p>æ— æ³•è¿æ¥å¤–ç½‘, ä¸”å†…ç½‘æ²¡æœ‰è¶³å¤Ÿå¤šçš„å¸¸ç”¨åŸºç¡€é•œåƒå¥½éš¾å—å•Š! <img align="absmiddle" alt="ğŸ˜­" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f62d.png" title=":sob:" width="20px"><img align="absmiddle" alt="ğŸ˜­" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f62d.png" title=":sob:" width="20px"><img align="absmiddle" alt="ğŸ˜­" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f62d.png" title=":sob:" width="20px"></p>
</blockquote>
<h3 id="_6">æ–°éƒ¨ç½²<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<blockquote>
<p><img align="absmiddle" alt="â—" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/2757.png" title=":exclamation:" width="20px"> æ³¨æ„:</p>
<p>å› ä¸ºè¯¥ç¦…é“dockeré•œåƒåŒ…æ‹¬æ•°æ®åº“ç»„ä»¶: mysql. ä¸ºæœ‰çŠ¶æ€. æ— æ³•å¹³æ»‘å‡çº§æˆ–å¯åŠ¨å¤šä¸ª.</p>
<p>æ‰€ä»¥å‡çº§å‰ä¸€å®šè¦æ³¨æ„å‡çº§ç­–ç•¥è¦æ˜¯: <code>Recreate</code>è€Œä¸èƒ½æ˜¯å…¶ä»–.  </p>
<p><code>Strategy:  Recreate</code></p>
</blockquote>
<p>æœ¬æ¬¡å‡çº§ä½¿ç”¨åˆ°äº†OpenShiftçš„ImageStreamåŠŸèƒ½. è¯¥åŠŸèƒ½æ˜¯å¤šä¸ªé•œåƒçš„é“¾å¼ç»„åˆ. ImageStreamåªæ˜¯ä¸ªå…ƒæ•°æ®, ä¸åŒ…å«é•œåƒ.</p>
<p>å‡çº§å‰, æˆ‘ä»¬å·²ç»ç¡®è®¤, ç¦…é“è¯¥APPçš„è§¦å‘è‡ªåŠ¨éƒ¨ç½²çš„ç­–ç•¥ä¸º: ImageStreamä¸º<code>zentao</code>çš„æœ€æ–°ç‰ˆæœ¬, é•œåƒå‘ç”Ÿäº†å˜åŒ–å°±è‡ªåŠ¨è§¦å‘éƒ¨ç½². å¦‚ä¸‹:</p>
<p><code>Triggers:  Image(zentao@latest, auto=true), Config</code></p>
<p>æˆ‘ä»¬é€šè¿‡å¦‚ä¸‹è®¾ç½®æ›´æ–°ImageStream:</p>
<blockquote>
<p><img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"> å¤‡æ³¨:</p>
<p>å…¶å®æœ€ç®€å•å°±æ˜¯å°†ä¸Šè¾¹çš„é•œåƒç›´æ¥pushä¸ºæœ€æ–°, å³: <code>docker push txocp-registry.example.com/ewhisper/zentao:latest</code>, ä¸€æ£€æµ‹åˆ°é•œåƒå‘ç”Ÿå˜åŒ–å°±ä¼šè‡ªåŠ¨éƒ¨ç½². ä½†æ˜¯è€ƒè™‘åˆ°ç¦…é“çš„2ä¸ªé•œåƒ: å¼€æºç‰ˆ11.5å’Œ ä¼ä¸šç‰ˆ3.3 ä¸æ˜¯è¿™ä¹ˆç®€å•çš„å…³ç³». æ‰€ä»¥ä¸ºäº†è€ƒè™‘å›æ»šæ–¹ä¾¿, å¹¶æ²¡æœ‰ç”¨è¿™ç§æ–¹å¼.</p>
</blockquote>
<div class="highlight"><pre><span></span>oc tag zentao:latest zentao:11.5  <span class="c1"># å°†ä¹‹å‰çš„å¼€æº11.5é•œåƒæ ‡è®°ä¸º: 11.5(ä¹‹å‰ç”±äºåªæœ‰è¿™ä¸€ä¸ªé•œåƒ, å°±ç›´æ¥ç”¨äº†latestæ ‡ç­¾)</span>
oc tag txocp-registry.example.com/ewhisper/zentao:3.3-ent zentao:3.3-ent --insecure<span class="o">=</span><span class="nb">true</span>  <span class="c1"># å°†å•†ä¸šç‰ˆ3.3é•œåƒæ ‡è®°ä¸ºImageStreamä¸­çš„ä¸€ä¸ªæ–°æ ‡ç­¾: zentao:3.3-ent. `--insecure=true` æ˜¯å› ä¸ºæµ‹è¯•é•œåƒåº“æ²¡æœ‰ç”¨https</span>
oc tag zentao:3.3-ent zentao:latest  <span class="c1"># å°†å•†ä¸šç‰ˆ3.3é•œåƒæ ‡è®°ä¸ºæœ€æ–°</span>
</pre></div>


<p>è¿™æ—¶ImageStreamçš„ä¿¡æ¯å¦‚ä¸‹:</p>
<p><img alt="ImageStream" src="./images/zentao_openshift_update_4.png"></p>
<p>æ­¤æ—¶, ç”±äºlatesté•œåƒå‘ç”Ÿå˜åŒ–, ä¼šè‡ªåŠ¨è§¦å‘æ–°ä¸€æ¬¡çš„éƒ¨ç½², ç›¸å…³çš„Eventså¦‚ä¸‹:</p>
<p><img alt="Deployment Events" src="./images/zentao_openshift_update_5.png"></p>
<h3 id="_7">æ‰§è¡Œå‡çº§ç¨‹åº<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>æ¥ä¸‹æ¥å°±æ˜¯<strong>ç¦…é“</strong> å‡çº§ä¼ä¸šç‰ˆçš„æ­¥éª¤äº†, å…·ä½“å‚è§ç¦…é“å®˜æ–¹æ–‡æ¡£ - <a href="https://www.zentao.net/book/zentaobizhelp/282.html">å¼€æºç‰ˆå‡çº§åˆ°ä¼ä¸šç‰ˆ</a></p>
<ol>
<li>è®¿é—®å‡çº§URL: æˆ‘æœ¬åœ°è®¿é—®ç¦…é“çš„åœ°å€æ˜¯ <a href="http://127.0.0.1:81/zentao">http://127.0.0.1:81/zentao</a>ï¼Œé‚£ä¹ˆæµè§ˆå™¨è¾“å…¥  <a href="http://127.0.0.1:81/zentao/upgrade.php">http://127.0.0.1:81/zentao/upgrade.php</a>ï¼Œå³å¯è¿›å…¥å‡çº§æ­¥éª¤ã€‚</li>
<li>è¯·æ ¹æ®æç¤ºåˆ›å»ºok.txt æ–‡ä»¶ã€‚åˆ›å»ºå®Œæˆåï¼Œè¯·ç‚¹å‡» ç»§ç»­æ›´æ–°ã€‚</li>
</ol>
<p><img alt="ok" src="./images/zentao_openshift_update_2.png"></p>
<ol start="3">
<li>ä¸€æ­¥ä¸€æ­¥æŒ‰ç…§æå‡è¿›è¡Œ, æœ€åä¼šæç¤ºè¦<strong>åˆ›å»ºç´¢å¼•</strong>, å¦‚ä¸‹å›¾:</li>
</ol>
<p><img alt="åˆ›å»ºç´¢å¼•" src="./images/zentao_openshift_update_3.png"></p>
<ol start="4">
<li>è‡³æ­¤å‡çº§å®Œæˆ, ç™»å½•è¿›è¡ŒåŠŸèƒ½å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯. (è¿™ä¸€æ­¥å¾ˆé‡è¦, ä½†æ˜¯æˆ‘å°±ä¸è¯¦ç»†è¯´æ˜äº†. ) <img align="absmiddle" alt="ğŸ‰" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f389.png" title=":tada:" width="20px"><img align="absmiddle" alt="ğŸ‰" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f389.png" title=":tada:" width="20px"><img align="absmiddle" alt="ğŸ‰" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f389.png" title=":tada:" width="20px"></li>
</ol>
<p><img alt="ä¼ä¸šç‰ˆä¿¡æ¯" src="./images/zentao_openshift_update_6.png"></p>
<blockquote>
<p><img align="absmiddle" alt="â—" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/2757.png" title=":exclamation:" width="20px"> æ³¨æ„:</p>
<p>å‡çº§æˆåŠŸå<strong>åƒä¸‡ä¸è¦</strong>ç›´æ¥è¿›å…¥é¦–é¡µå¹¶æŒ‰ç…§é¦–é¡µæç¤ºæ“ä½œ, æœ¬äººè¡€çš„æ•™è®­!!! è°¨è®°!!! å¦‚ä¸‹:</p>
<p><img alt="å‡çº§åé¦–é¡µæç¤º" src="./images/zentao_openshift_update_1.png"></p>
</blockquote>
<h2 id="_8">å›é¡¾å’Œæ€»ç»“<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>å…¶å®å›é¡¾ä¸€ä¸‹è¿‡ç¨‹, è™½ç„¶å¾ˆå¤æ‚, ä½†è¿™ç§å¤æ‚æ˜¯ä¼ä¸šç¯å¢ƒçš„ç½‘ç»œå¤æ‚å¯¼è‡´çš„, æ˜¯å¯ä»¥åç»­è¿›ä¸€æ­¥ä¼˜åŒ–çš„. åŒ…æ‹¬:</p>
<ol>
<li>å¤‡ä»½: åˆ›å»ºå¹¶ä½¿ç”¨ä¸€é”®è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬. (å…¶å®ç¦…é“æœ¬èº«æœ‰çš„, ä½äº: åå° -&gt; æ•°æ® -&gt; å¼€å§‹å¤‡ä»½)</li>
<li>ä»£ç å‡çº§å¹¶ç¼–è¯‘ä¸ºé•œåƒ: å…¶å®<strong>å‡çº§</strong>é‚£ä¸€ç« èŠ‚å¯ä»¥å¤§å¹…åº¦ç¼©å‡çš„, ç†æƒ³æƒ…å†µæ˜¯:<ol>
<li>ä»£ç æ”¾åœ¨gitä¸Š, gitä¸Šä»£ç æ›´æ–°åˆ°éœ€è¦éƒ¨ç½²çš„ç‰ˆæœ¬; (å¼€å‘çš„ç²¾åŠ›å®Œå…¨ä¸“æ³¨äºåˆ›é€ æ€§å·¥ä½œ)</li>
<li>é…ç½®OpenShiftçš„webhook, è§¦å‘è‡ªåŠ¨æ„å»ºæ–°é•œåƒå¹¶pushåˆ°é•œåƒåº“;</li>
<li>é•œåƒåº“æ£€æµ‹åˆ°é•œåƒå‘ç”Ÿå˜åŒ–, è§¦å‘è‡ªåŠ¨éƒ¨ç½²</li>
<li>å‡çº§å®Œæˆ.</li>
</ol>
</li>
<li>è¦åšåˆ°ä¸Šè¾¹è¯´çš„è¿™ä¹ˆç¾å¥½, è¿˜æœ‰ä»¥ä¸‹åœ°æ–¹è¦æ”¹è¿›:<ol>
<li>æµ‹è¯•ç¯å¢ƒè¿æ¥å¤–ç½‘, æˆ–æµ‹è¯•ç¯å¢ƒæœ‰ä¸€ä¸ªå¯ä»¥å®šæœŸåŒæ­¥å¸¸ç”¨é•œåƒçš„é•œåƒåº“.</li>
<li>å¼€å‘çš„ç”µè„‘è¦å®‰è£…dockerå’ŒOpenShift CLI å·¥å…·<code>oc</code> , å¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—® æµ‹è¯•é•œåƒåº“å’Œæµ‹è¯•OpenShift.</li>
</ol>
</li>
</ol>
<p>å¦‚æœå¯ä»¥åšåˆ°, é‚£ä¹ˆç†æƒ³ä¸­çš„æƒ…å†µå°±æ˜¯:</p>
<ul>
<li>å¼€å‘åªç®¡åˆ›é€ æ€§çš„å·¥ä½œ(å†™ä»£ç ), å…¶ä»–å…¨éƒ¨é€šè¿‡é¢„ç½®æ¡ä»¶è‡ªåŠ¨è§¦å‘, å®Œå…¨ä¸éœ€è¦äººå·¥å¹²é¢„.</li>
<li>è¿ç»´åªè´Ÿè´£ç¬¬ä¸€æ¬¡ä¸Šçº¿çš„ç›¸å…³è„šæœ¬ç¼–å†™, èµ„æºåˆ†é…, ä»¥åŠå®¹å™¨å¹³å°, ç›‘æ§å‘Šè­¦å¹³å°ç­‰çš„å¼€å‘.</li>
</ul>
<p><img align="absmiddle" alt="ğŸ˜" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f60d.png" title=":heart_eyes:" width="20px"><img align="absmiddle" alt="ğŸ˜" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f60d.png" title=":heart_eyes:" width="20px"><img align="absmiddle" alt="ğŸ˜" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f60d.png" title=":heart_eyes:" width="20px">æƒ³æƒ³éƒ½é†‰äº†</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://www.EWhisper.cn/tag/xiang-mu-guan-li.html">é¡¹ç›®ç®¡ç†</a>
      <a href="https://www.EWhisper.cn/tag/openshift.html">openshift</a>
      <a href="https://www.EWhisper.cn/tag/docker.html">docker</a>
    </p>
  </div>

  <div class="center social-share">
    <p>å–œæ¬¢è¿™ç¯‡æ–‡ç« å—ï¼Ÿå°†å®ƒä¸æ‚¨çš„æœ‹å‹åˆ†äº«å§ï¼</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
    <div class="addthis_inline_share_toolbox"></div>
  </div>

  <div class="neighbors">
    <a class="btn float-left" href="https://www.EWhisper.cn/container-best-practices.html" title="å®¹å™¨æœ€ä½³å®è·µ">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="https://www.EWhisper.cn/analyze-k8s-difficult-problems-10s-delay.html" title="Kubernetes ç–‘éš¾é—®é¢˜æ’æŸ¥ - 10s å»¶è¿Ÿ">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>æ‚¨å¯èƒ½è¿˜å–œæ¬¢</h4>
    <ul class="related-posts">
      <li><a href="https://www.EWhisper.cn/I-was-screwed-by-previous-project.html">ä»Šå¤©è¢«å‰ä¸€ä¸ªé¡¹ç›®ç»„åŸ‹çš„é›·ç‚¸æƒ¨äº†!</a></li>
      <li><a href="https://www.EWhisper.cn/container-best-practices.html">å®¹å™¨æœ€ä½³å®è·µ</a></li>
      <li><a href="https://www.EWhisper.cn/install-gitlab-with-docker.html">ä½¿ç”¨ Docker å®‰è£… Gitlab</a></li>
      <li><a href="https://www.EWhisper.cn/deploy-app-with-openshift-in-enterprise-env.html">OpenShiftä¼ä¸šæµ‹è¯•ç¯å¢ƒåº”ç”¨éƒ¨ç½²å®æˆ˜</a></li>
      <li><a href="https://www.EWhisper.cn/openshift-pod-autoscaling.html">å®¹å™¨è‡ªåŠ¨ä¼¸ç¼©</a></li>
    </ul>
  </div>


</article>

    <footer>
<p>
  &copy;  2020 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p><a href="http://beian.miit.gov.cn" target="_blank">æ²ªICPå¤‡19007314å·-1</a></p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
<!-- StatusCake -->
<a href="https://www.statuscake.com" title="ä¸ªäººæŠ€æœ¯åˆ†äº« Uptime">
  <img src="https://app.statuscake.com/button/index.php?Track=CbJdcjmnCx&amp;Days=7&amp;Design=7" alt="ä¸ªäººæŠ€æœ¯åˆ†äº« Uptime"/>
</a>

<!-- End StatusCake --></p>    </footer>
  </main>


    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5c98c3e21c4def55" async="async"></script>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " ä¸ªäººæŠ€æœ¯åˆ†äº« ",
  "url" : "https://www.EWhisper.cn",
  "image": "//s.gravatar.com/avatar/7c743bc6ac83171e35a5aa8bd66cc1ea?s=120",
  "description": "Focus on Python/Java/DevOps/Observability"
}
</script>

<a href="https://github.com/east4ming/my-pelican" class="github-corner" aria-label="View source on Github">
    <svg width="80"
         height="80"
         viewBox="0 0 250 250"
         style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
         aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor"
              style="transform-origin: 130px 106px;"
              class="octo-arm">
        </path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor"
              class="octo-body">
        </path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></body>
</html>