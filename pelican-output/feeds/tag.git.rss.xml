<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>ä¸œé£å¾®é¸£ Blog - git</title><link>https://www.EWhisper.cn/</link><description>Focus on Python/Java/DevOps/Observability</description><lastBuildDate>Sun, 26 May 2019 21:24:52 +0800</lastBuildDate><item><title>ä½¿ç”¨ Docker å®‰è£… Gitlab</title><link>https://www.EWhisper.cn/install-gitlab-with-docker.html</link><description>&lt;h2 id="docker"&gt;Docker å®‰è£…&lt;a class="headerlink" href="#docker" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"&gt; è¯´æ˜:&lt;/p&gt;
&lt;p&gt;å®˜ç½‘é“¾æ¥:&lt;a href="https://docs.gitlab.com/omnibus/docker/"&gt;GitLab Docker images&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/docker/Dockerfile"&gt;å®˜ç½‘ Dockerfile&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo docker pull gitlab/gitlab-ce  &lt;span class="c1"&gt;# ä¸‹è½½&lt;/span&gt;
sudo docker run --detach &lt;span class="se"&gt;\&lt;/span&gt;
  --hostname gitlab.example.com &lt;span class="se"&gt;\&lt;/span&gt;
  --publish &lt;span class="m"&gt;443&lt;/span&gt;:443 --publish &lt;span class="m"&gt;80&lt;/span&gt;:80 --publish &lt;span class="m"&gt;22&lt;/span&gt;:22 &lt;span class="se"&gt;\&lt;/span&gt;
  --name gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --restart always &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/config:/etc/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/logs:/var/log/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/data:/var/opt/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  gitlab/gitlab-ce:latest  &lt;span class="c1"&gt;# è¿è¡Œå®¹å™¨&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="_1"&gt;æ•°æ®å­˜åœ¨å“ªå„¿:&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;æœ¬åœ°ä½ç½®&lt;/th&gt;
&lt;th align="left"&gt;å®¹å™¨ä½ç½®&lt;/th&gt;
&lt;th align="left"&gt;ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;code&gt;/srv/gitlab/data&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;/var/opt/gitlab&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;ç”¨äºå­˜å‚¨åº”ç”¨æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;code&gt;/srv/gitlab/logs&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;/var/log/gitlab&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;ç”¨äºå­˜å‚¨æ—¥å¿—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;code&gt;/srv/gitlab/config&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;&lt;code&gt;/etc/gitlab&lt;/code&gt;&lt;/td&gt;
&lt;td align="left"&gt;ç”¨äºå­˜å‚¨GitLabé…ç½®æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="gitlab"&gt;é…ç½®Gitlab:&lt;a class="headerlink" href="#gitlab" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶ä½äº: &lt;code&gt;/etc/gitlab/gitlab.rb&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‡ ç§é…ç½®æ–¹å¼:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo docker exec -it gitlab /bin/bash&lt;/code&gt; è¿›å…¥åˆ°å®¹å™¨å†…, ç„¶åé€šè¿‡&lt;code&gt;vi&lt;/code&gt;ç¼–è¾‘ä¿å­˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo docker exec -it gitlab editor /etc/gitlab/gitlab.rb&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¾‘å®Œä¹‹å, é‡å¯å®¹å™¨:&lt;code&gt;sudo docker restart gitlab&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="docker_1"&gt;é¢„é…ç½® Docker å®¹å™¨&lt;a class="headerlink" href="#docker_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡å°†ç¯å¢ƒå˜é‡&lt;code&gt;GITLAB_OMNIBUS_CONFIG&lt;/code&gt;æ·»åŠ åˆ°docker runå‘½ä»¤æ¥é¢„é…ç½®GitLab Dockeræ˜ åƒã€‚æ­¤å˜é‡å¯ä»¥åŒ…å«ä»»ä½•&lt;code&gt;gitlab.rb&lt;/code&gt;è®¾ç½®ï¼Œå¹¶åœ¨åŠ è½½å®¹å™¨&lt;code&gt;gitlab.rb&lt;/code&gt;æ–‡ä»¶ä¹‹å‰è¿›è¡ŒåŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹å¦‚ä¸‹:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo docker run --detach &lt;span class="se"&gt;\&lt;/span&gt;
  --hostname gitlab.example.com &lt;span class="se"&gt;\&lt;/span&gt;
  --env &lt;span class="nv"&gt;GITLAB_OMNIBUS_CONFIG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;external_url &amp;#39;http://my.domain.com/&amp;#39;; gitlab_rails[&amp;#39;lfs_enabled&amp;#39;] = true;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  --publish &lt;span class="m"&gt;443&lt;/span&gt;:443 --publish &lt;span class="m"&gt;80&lt;/span&gt;:80 --publish &lt;span class="m"&gt;22&lt;/span&gt;:22 &lt;span class="se"&gt;\&lt;/span&gt;
  --name gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --restart always &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/config:/etc/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/logs:/var/log/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/data:/var/opt/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  gitlab/gitlab-ce:latest
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="_2"&gt;å¯åŠ¨å®¹å™¨å&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡&lt;a href="http://localhost"&gt;http://localhost&lt;/a&gt; è¿›è¡Œè®¿é—®.&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ &lt;code&gt;sudo docker logs -f gitlab&lt;/code&gt; æŸ¥çœ‹æ—¥å¿—.&lt;/p&gt;
&lt;h3 id="ip"&gt;å‘å¸ƒåˆ°å…¬ç½‘IP&lt;a class="headerlink" href="#ip" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo docker run --detach &lt;span class="se"&gt;\&lt;/span&gt;
  --hostname gitlab.example.com &lt;span class="se"&gt;\&lt;/span&gt;
  --publish &lt;span class="m"&gt;198&lt;/span&gt;.51.100.1:443:443 &lt;span class="se"&gt;\&lt;/span&gt;
  --publish &lt;span class="m"&gt;198&lt;/span&gt;.51.100.1:80:80 &lt;span class="se"&gt;\&lt;/span&gt;
  --publish &lt;span class="m"&gt;198&lt;/span&gt;.51.100.1:22:22 &lt;span class="se"&gt;\&lt;/span&gt;
  --name gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --restart always &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/config:/etc/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/logs:/var/log/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  --volume /srv/gitlab/data:/var/opt/gitlab &lt;span class="se"&gt;\&lt;/span&gt;
  gitlab/gitlab-ce:latest
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="docker-composegitlab"&gt;ä½¿ç”¨docker-composeå®‰è£…GitLab&lt;a class="headerlink" href="#docker-composegitlab" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… docker compose&lt;/li&gt;
&lt;li&gt;åˆ›å»º&lt;code&gt;docker-compose.yml&lt;/code&gt; æ–‡ä»¶ï¼ˆæˆ–&lt;a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/docker/docker-compose.yml"&gt;ä¸‹è½½ç¤ºä¾‹&lt;/a&gt;ï¼‰: &lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;gitlab/gitlab-ce:latest&amp;#39;&lt;/span&gt;
   &lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
   &lt;span class="nt"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;gitlab.example.com&amp;#39;&lt;/span&gt;
   &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
     &lt;span class="nt"&gt;GITLAB_OMNIBUS_CONFIG&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;|&lt;/span&gt;
       &lt;span class="no"&gt;external_url &amp;#39;https://gitlab.example.com&amp;#39;&lt;/span&gt;
       &lt;span class="no"&gt;# Add any other gitlab.rb configuration here, each on its own line&lt;/span&gt;
   &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
     &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;80:80&amp;#39;&lt;/span&gt;
     &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;443:443&amp;#39;&lt;/span&gt;
     &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;22:22&amp;#39;&lt;/span&gt;
   &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
     &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/srv/gitlab/config:/etc/gitlab&amp;#39;&lt;/span&gt;
     &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/srv/gitlab/logs:/var/log/gitlab&amp;#39;&lt;/span&gt;
     &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;/srv/gitlab/data:/var/opt/gitlab&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="3"&gt;
&lt;li&gt;ç¡®ä¿æ‚¨&lt;code&gt;docker-compose.yml&lt;/code&gt;ä¸è¿è¡Œ&lt;code&gt;docker-compose up -d&lt;/code&gt; åœ¨åŒä¸€ç›®å½•ä¸­ä»¥è¿è¡ŒGitLab&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="openshift"&gt;OpenShift å®‰è£…&lt;a class="headerlink" href="#openshift" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="â—" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/2757.png" title=":exclamation:" width="20px"&gt; æ³¨æ„:&lt;/p&gt;
&lt;p&gt;ç›®å‰Gitlabé€šè¿‡OpenShift å®‰è£…, æœ‰ä¸€äº›å·²çŸ¥çš„é—®é¢˜. å¹¶ä¸”åªåœ¨OpenShift 3.11ç‰ˆæœ¬ä¸Šæµ‹è¯•é€šè¿‡.&lt;/p&gt;
&lt;p&gt;å¦å¤–, å®‰è£…æ˜¯é€šè¿‡ Helm Chartæ–¹å¼è¿›è¡Œå®‰è£…çš„. è¿˜æ˜¯æœ‰ç‚¹å¤æ‚çš„...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="_3"&gt;å·²çŸ¥çš„é—®é¢˜&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹é—®é¢˜æ˜¯å·²çŸ¥çš„ï¼Œå¹¶ä¸”é¢„è®¡é€‚ç”¨äºOpenShiftä¸Šçš„GitLabå®‰è£…ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;anyuid&lt;/code&gt;sccçš„è¦æ±‚ï¼š(OpenShift çš„å®‰å…¨åŠ å›ºå¯¼è‡´çš„)&lt;ul&gt;
&lt;li&gt;GitLabçš„ä¸åŒç»„ä»¶ï¼Œå¦‚Sidekiqï¼Œunicornç­‰ï¼Œä½¿ç”¨UID 1000æ¥è¿è¡ŒæœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;PostgreSQL chartä»¥&lt;code&gt;root&lt;/code&gt;ç”¨æˆ·èº«ä»½è¿è¡ŒæœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gitlab.com/charts/gitlab/issues/752"&gt;é—®é¢˜ï¼ƒ752&lt;/a&gt;æ˜¯opençŠ¶æ€ï¼Œä»¥è°ƒæŸ¥æ›´å¤šæœ‰å…³è§£å†³æ­¤é—®é¢˜çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨&lt;code&gt;hostpath&lt;/code&gt;å·ï¼Œåˆ™éœ€è¦ä¸ºä¸»æœºä¸­çš„æŒä¹…æ€§å·ç›®å½•æˆäºˆ&lt;code&gt;0777&lt;/code&gt;æƒé™ï¼Œä»¥æˆäºˆæ‰€æœ‰ç”¨æˆ·å¯¹å·çš„è®¿é—®æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;OpenShiftçš„å†…ç½®router ä¸æ”¯æŒé€šè¿‡SSHè¿›è¡ŒGitæ“ä½œã€‚ &lt;a href="https://gitlab.com/charts/gitlab/issues/892"&gt;é—®é¢˜ï¼ƒ892&lt;/a&gt; æ˜¯oepnçŠ¶æ€ï¼Œä»¥è°ƒæŸ¥æ›´å¤šæœ‰å…³è§£å†³æ­¤é—®é¢˜çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒGitLab Registryä¸èƒ½ä¸OpenShiftçš„å†…ç½®routeré…åˆä½¿ç”¨ã€‚ &lt;a href="https://gitlab.com/charts/gitlab/issues/893"&gt;é—®é¢˜ï¼ƒ893&lt;/a&gt;æ˜¯opençŠ¶æ€ï¼Œä»¥è°ƒæŸ¥æ›´å¤šæœ‰å…³ä¿®å¤æ­¤é—®é¢˜çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ä»Let's Encryptè‡ªåŠ¨å‘å‡ºSSLè¯ä¹¦ä¸é€‚ç”¨äºOpenShift routerã€‚æˆ‘ä»¬å»ºè®®&lt;a href="https://docs.gitlab.com/charts/installation/tls.html#option-2-use-your-own-wildcard-certificate"&gt;æ‚¨ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦&lt;/a&gt;ã€‚ &lt;a href="https://gitlab.com/charts/gitlab/issues/894"&gt;é—®é¢˜ï¼ƒ894&lt;/a&gt;å¼€æ”¾ï¼Œä»¥è°ƒæŸ¥æ›´å¤šæœ‰å…³è§£å†³æ­¤é—®é¢˜çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_4"&gt;å…ˆå†³æ¡ä»¶æ­¥éª¤&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è¯·å‚é˜…&lt;a href="https://www.okd.io/download.html#oc-platforms"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt; ä»¥å®‰è£…å’Œé…ç½®ç¾¤é›†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿è¡Œ&lt;code&gt;oc cluster status&lt;/code&gt;å¹¶ç¡®è®¤ç¾¤é›†æ­£åœ¨è¿è¡Œï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc cluster status
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;è¾“å‡ºåº”ç±»ä¼¼äºï¼š
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Web console URL: https://gitlab.example.com:8443/console/

Config is at host directory
Volumes are at host directory
Persistent volumes are at host directory /home/okduser/openshift/openshift.local.clusterup/openshift.local.pv
Data will be discarded when cluster is destroyed
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;è¯·æ³¨æ„ä¸»æœºä¸­Persistent Volumesçš„ä½ç½®ï¼ˆåœ¨ä¸Šä¾‹ä¸­`/home/okduser/openshift/openshift.local.clusterup/openshift.local.pv`ï¼‰ã€‚ä»¥ä¸‹å‘½ä»¤éœ€è¦`PV_HOST_DIRECTORY`ç¯å¢ƒå˜é‡ä¸­çš„è·¯å¾„ã€‚
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="3"&gt;
&lt;li&gt;ä¿®æ”¹PVç›®å½•çš„æƒé™ï¼ˆç”¨ä»¥ä¸Šå€¼æ›¿æ¢ä»¥ä¸‹å‘½ä»¤ä¸­çš„è·¯å¾„ï¼‰ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo chmod -R a+rwx &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PV_HOST_DIRECTORY&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;/*
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="4"&gt;
&lt;li&gt;åˆ‡æ¢åˆ°ç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc login -u system:admin
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="5"&gt;
&lt;li&gt;å°†&lt;code&gt;anyuid&lt;/code&gt;scc æ·»åŠ åˆ°ç³»ç»Ÿç”¨æˆ·ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc adm policy add-scc-to-group anyuid system:authenticated
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;**è­¦å‘Š**ï¼šæ­¤è®¾ç½®å°†åº”ç”¨äºæ‰€æœ‰namespaceï¼Œå¹¶å°†å¯¼è‡´Dockeré•œåƒæœªæ˜ç¡®æŒ‡å®šUSERä½œä¸º`root`ç”¨æˆ·è¿è¡Œã€‚ [é—®é¢˜ï¼ƒ895](https://gitlab.com/charts/gitlab/issues/895)æ˜¯å¼€æ”¾çš„ï¼Œç”¨äºè®°å½•æ‰€éœ€çš„ä¸åŒæœåŠ¡å¸æˆ·ï¼Œå¹¶æè¿°ä»…å°†sccæ·»åŠ åˆ°è¿™äº›æœåŠ¡å¸æˆ·ï¼Œå› æ­¤å½±å“å¯èƒ½æœ‰é™ã€‚
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="6"&gt;
&lt;li&gt;åˆ›å»ºæœåŠ¡å¸æˆ·å’Œ&lt;code&gt;rolebinding&lt;/code&gt;RBACå¹¶&lt;a href="https://docs.gitlab.com/charts/installation/tools.html#helm"&gt;å®‰è£…Tiller&lt;/a&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl create -f https://gitlab.com/charts/gitlab/raw/master/doc/installation/examples/rbac-config.yaml
helm init --service-account tiller
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="_5"&gt;ä¸‹ä¸€æ­¥&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨ç¾¤é›†å¯åŠ¨å¹¶è¿è¡Œåï¼Œç»§ç»­&lt;a href="https://docs.gitlab.com/charts/installation/deployment.html"&gt;å®‰è£…chart&lt;/a&gt;ï¼Œå¹¶å‡†å¤‡å¥½é™æ€IPå’ŒDNSæ¡ç›®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹å‰ï¼Œè¯·æ³¨æ„å¸¸è§„ chartå®‰è£…è¿‡ç¨‹ä¸­çš„ä»¥ä¸‹æ›´æ”¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æˆ‘ä»¬å°†ä½¿ç”¨OpenShiftçš„å†…ç½®routerï¼Œå› æ­¤éœ€è¦ç¦ç”¨chartä¸­åŒ…å«çš„nginx-ingressæœåŠ¡ã€‚å°†ä»¥ä¸‹æ ‡å¿—ä¼ é€’ç»™&lt;code&gt;helm install&lt;/code&gt;å‘½ä»¤ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;--set nginx-ingress.enabled&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="2"&gt;
&lt;li&gt;ç”±äºå·²çŸ¥å†…ç½®æ³¨å†Œè¡¨ä¸èƒ½ä½¿ç”¨Helm Chartä¸OpenShiftä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤è¯·ç¦ç”¨æ³¨å†Œè¡¨æœåŠ¡ã€‚å°†ä»¥ä¸‹æ ‡å¿—ä¼ é€’ç»™ &lt;code&gt;helm install&lt;/code&gt;å‘½ä»¤ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;--set registry.enabled=false
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="3"&gt;
&lt;li&gt;&lt;a href="https://docs.gitlab.com/charts/installation/tls.html#option-2-use-your-own-wildcard-certificate"&gt;ä½¿ç”¨æ‚¨è‡ªå·±çš„SSLè¯ä¹¦&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">ä¸œé£å¾®é¸£</dc:creator><pubDate>Sun, 26 May 2019 21:24:52 +0800</pubDate><guid isPermaLink="false">tag:www.ewhisper.cn,2019-05-26:/install-gitlab-with-docker.html</guid><category>docker</category><category>openshift</category><category>k8s</category><category>containers</category><category>git</category></item><item><title>ä½¿ç”¨OpenShiftè¿›è¡ŒäºŒè¿›åˆ¶æ„å»º</title><link>https://www.EWhisper.cn/binary-builds-with-openshift.html</link><description>&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;ä»‹ç»&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;ç”¨ä¾‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;é™åˆ¶&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;æ•™ç¨‹æ¦‚è¿°&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_5"&gt;æ•™ç¨‹ï¼šæ„å»ºæœ¬åœ°ä»£ç æ›´æ”¹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_6"&gt;æ•™ç¨‹ï¼šæ„å»ºç§æœ‰ä»£ç &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pipeline"&gt;æ•™ç¨‹ï¼šæ¥è‡ª pipeline çš„äºŒè¿›åˆ¶å·¥ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="_1"&gt;ä»‹ç»&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;OpenShift æ¨èå’Œå¸¸ç”¨çš„æ„å»ºæ–¹å¼æ˜¯: ç›´æ¥ä»ä»£ç ä»“åº“(å¦‚GIT æˆ–SVN)ä¸­æ‹‰å–æºç è¿›è¡Œæ„å»º(å³æºç æ„å»º). ä½†æ˜¯è¿™ä¸€ç§æ„å»ºæ–¹å¼å¹¶ä¸èƒ½æ»¡è¶³æ‰€æœ‰çš„éœ€æ±‚, æ‰€ä»¥è¿˜æœ‰ä¸€ç§æ„å»ºæ–¹å¼å°±æ˜¯: äºŒè¿›åˆ¶æ„å»º. äºŒè¿›åˆ¶æ„å»ºé€‚ç”¨äºä»¥ä¸‹2ä¸ªåœºæ™¯:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¼€å‘äººå‘˜æœ¬åœ°å¼€å‘è°ƒè¯•ä»£ç å¹¶æ„å»º;&lt;/li&gt;
&lt;li&gt;OpenShiftå’Œ CI/CDçš„pipelineè¿›è¡Œæ•´åˆ, è·å–ä»å‰è¾¹å¹³å°(å¦‚è‡ªåŠ¨åŒ–å¼€å‘å¹³å°æˆ–æµ‹è¯•å¹³å°)ä¼ è¿‡æ¥çš„å·¥ä»¶(å³äºŒè¿›åˆ¶åŒ…)å¹¶æ„å»ºä¸ºé•œåƒ.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;OpenShiftä¸­çš„äºŒè¿›åˆ¶æ„å»ºåŠŸèƒ½å…è®¸å¼€å‘äººå‘˜å°†æºä»£ç æˆ–å·¥ä»¶ç›´æ¥ä¸Šä¼ åˆ°æ„å»º(build)ï¼Œè€Œä¸æ˜¯ä»Gitå­˜å‚¨åº“URL pulléœ€è¦æ„å»ºçš„æºã€‚é€šè¿‡æºä»£ç ï¼ŒDockeræˆ–è‡ªå®šä¹‰æ„å»ºç­–ç•¥çš„ BuildConfig éƒ½å¯ä»¥ä½œä¸ºäºŒè¿›åˆ¶æ„å»ºå¯åŠ¨ã€‚ä»æœ¬åœ°å·¥ä»¶å¯åŠ¨æ„å»ºæ—¶ï¼Œç°æœ‰æºå¼•ç”¨å°†æ›¿æ¢ä¸ºæ¥è‡ªæœ¬åœ°ç”¨æˆ·è®¡ç®—æœºçš„æºã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨å‡ ç§æ–¹å¼æä¾›æºï¼Œè¿™äº›æ–¹å¼å¯¹åº”äºä½¿ç”¨&lt;code&gt;start-build&lt;/code&gt;å‘½ä»¤æ—¶å¯ç”¨çš„å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»æ–‡ä»¶ï¼ˆ&lt;code&gt;--from-file&lt;/code&gt;ï¼‰ï¼šå½“æ„å»ºçš„æ•´ä¸ªæºåŒ…å«å•ä¸ªæ–‡ä»¶æ—¶å°±æ˜¯è¿™ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½æ˜¯ç”¨äºDockeræ„å»ºçš„&lt;code&gt;Dockerfile&lt;/code&gt;ï¼Œç”¨äºJavaåº”ç”¨æ„å»ºçš„&lt;code&gt;pom.xml&lt;/code&gt;ï¼Œæˆ–ç”¨äºRubyæ„å»ºçš„&lt;code&gt;Gemfile&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä»ç›®å½•ï¼ˆ&lt;code&gt;--from-directory&lt;/code&gt;ï¼‰ï¼šå½“æºåœ¨æœ¬åœ°ç›®å½•ä¸­å¹¶ä¸”æœªæäº¤åˆ°Gitå­˜å‚¨åº“æ—¶ä½¿ç”¨æ­¤ç›®å½•ã€‚&lt;code&gt;start-build&lt;/code&gt; å‘½ä»¤å°†åˆ›å»ºç»™å®šç›®å½•çš„å­˜æ¡£ï¼Œå¹¶å°†å…¶ä½œä¸ºæºä¸Šä¼ åˆ°æ„å»ºå™¨(builder)ã€‚&lt;/li&gt;
&lt;li&gt;ä»å­˜æ¡£ï¼ˆ&lt;code&gt;--from-archive&lt;/code&gt;ï¼‰ï¼šå½“å…·æœ‰æºçš„å­˜æ¡£å·²å­˜åœ¨æ—¶ä½¿ç”¨æ­¤é€‰é¡¹ã€‚è¯¥å­˜æ¡£å¯ä»¥æ˜¯&lt;code&gt;tar&lt;/code&gt;ï¼Œ&lt;code&gt;tar.gz&lt;/code&gt;æˆ–&lt;code&gt;zip&lt;/code&gt;æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;ä»Gitå­˜å‚¨åº“ï¼ˆ&lt;code&gt;--from-repo&lt;/code&gt;ï¼‰ï¼šæºæ˜¯å½“å‰ç”¨æˆ·æœ¬åœ°è®¡ç®—æœºä¸Šçš„Gitå­˜å‚¨åº“çš„ä¸€éƒ¨åˆ†ã€‚å½“å‰å­˜å‚¨åº“çš„HEAD commitå°†è¢«å­˜æ¡£å¹¶å‘é€åˆ°OpenShiftè¿›è¡Œæ„å»ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;ç”¨ä¾‹&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;äºŒè¿›åˆ¶æ„å»ºé€‚ç”¨äºæ— æ³•ä»ç°æœ‰Gitå­˜å‚¨åº“ä¸­æå–æºçš„éœ€æ±‚ã€‚ä½¿ç”¨äºŒè¿›åˆ¶æ„å»ºçš„åŸå› åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ„å»ºå’Œæµ‹è¯•æœ¬åœ°ä»£ç çš„å˜æ›´ã€‚å…‹éš†æ¥è‡ªå…¬å…±å­˜å‚¨åº“çš„æºï¼Œå¹¶å°†æœ¬åœ°å˜æ›´ä¸Šä¼ åˆ°OpenShiftè¿›è¡Œæ„å»ºã€‚è€Œæ— éœ€åœ¨ä»»ä½•åœ°æ–¹æäº¤æˆ–æ¨é€æœ¬åœ°æ›´æ”¹ã€‚&lt;/li&gt;
&lt;li&gt;æ„å»ºç§æœ‰ä»£ç ã€‚æ–°æ„å»ºå¯ä»¥ä½œä¸ºäºŒè¿›åˆ¶æ„å»ºä»å¤´å¼€å§‹ã€‚ç„¶åå¯ä»¥å°†æºç›´æ¥ä»æœ¬åœ°å·¥ä½œç«™ä¸Šä¼ åˆ°OpenShiftï¼Œè€Œæ— éœ€å°†å…¶ç­¾å…¥SCMã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å…¶ä»–æ¥æºçš„å·¥ä»¶æ„å»ºé•œåƒã€‚é€šè¿‡Jenkins pipelineï¼ŒäºŒè¿›åˆ¶æ„å»ºå¯ä»¥ç”¨äºæ•´åˆä½¿ç”¨Mavenæˆ–Cç¼–è¯‘å™¨ç­‰å·¥å…·æ„å»ºçš„å·¥ä»¶ï¼Œä»¥åŠä½¿ç”¨è¿™äº›æ„å»ºçš„è¿è¡Œæ—¶é•œåƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_3"&gt;é™åˆ¶&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;äºŒè¿›åˆ¶æ„å»ºæ— æ³•é‡å¤ã€‚ç”±äºäºŒè¿›åˆ¶æ„å»ºä¾èµ–äºåœ¨æ„å»ºå¼€å§‹æ—¶ç”¨æˆ·ä¸Šä¼ å·¥ä»¶ï¼Œå› æ­¤OpenShiftæ— æ³•é‡å¤ç›¸åŒçš„æ„å»ºè€Œæ— éœ€ç”¨æˆ·æ¯æ¬¡éƒ½é‡å¤ç›¸åŒçš„ä¸Šè½½ã€‚&lt;/li&gt;
&lt;li&gt;æ— æ³•è‡ªåŠ¨è§¦å‘äºŒè¿›åˆ¶ç”Ÿæˆã€‚å®ƒä»¬åªèƒ½åœ¨ç”¨æˆ·ä¸Šä¼ æ‰€éœ€çš„äºŒè¿›åˆ¶å·¥ä»¶æ—¶æ‰‹åŠ¨å¯åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="â—" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/2757.png" title=":exclamation:" width="20px"&gt;&lt;/p&gt;
&lt;p&gt;ä»¥äºŒè¿›åˆ¶æ„å»ºæ–¹å¼å¯åŠ¨çš„æ„å»ºç‰ˆæœ¬ä¹Ÿå¯èƒ½å…·æœ‰å·²é…ç½®çš„æºURLã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè§¦å‘å™¨ä¼šæˆåŠŸå¯åŠ¨æ„å»ºï¼Œä½†æºå°†æ¥è‡ªé…ç½®çš„æºURLï¼Œè€Œä¸æ˜¯æ¥è‡ªä¸Šæ¬¡æ„å»ºè¿è¡Œæ—¶ç”¨æˆ·æä¾›çš„æºã€‚(æ¯”å¦‚: ç”¨æˆ·å…ˆä»Gitä»“åº“ä¸‹è½½äº†æºç å¹¶ä¿®æ”¹, ç”¨æœ¬åœ°ä¿®æ”¹åçš„æºç æ‰‹åŠ¨ä¸Šä¼ ã€æ„å»ºï¼Œé‚£ä¹ˆOpenShiftä¼šè·å–åˆ°Gitä»“åº“çš„URL, å¦‚æœé…ç½®äº†è§¦å‘å™¨, ä¸‹æ¬¡æ„å»ºå°±ç›´æ¥é€šè¿‡Git URL pullæºç å¹¶è‡ªåŠ¨æ„å»º, è€Œä¸æ˜¯è‡ªåŠ¨è·å–æœ¬åœ°çš„æºç .)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_4"&gt;æ•™ç¨‹æ¦‚è¿°&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ•™ç¨‹å‡è®¾æ‚¨æœ‰ä¸€ä¸ªå¯ç”¨çš„OpenShifté›†ç¾¤ï¼Œå¹¶ä¸”æ‚¨æœ‰ä¸€ä¸ªå¯ä»¥åˆ›å»ºå·¥ä»¶çš„é¡¹ç›®ã€‚å®ƒè¦æ±‚æ‚¨æ‹¥æœ‰æœ¬åœ°&lt;code&gt;git&lt;/code&gt;å’Œ&lt;code&gt;oc&lt;/code&gt;å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;h3 id="_5"&gt;æ•™ç¨‹ï¼šæ„å»ºæœ¬åœ°ä»£ç æ›´æ”¹&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;åŸºäºç°æœ‰æºå­˜å‚¨åº“åˆ›å»ºæ–°åº”ç”¨ç¨‹åºå¹¶ä¸ºå…¶åˆ›å»ºè·¯ç”±ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc new-app https://github.com/openshift/ruby-hello-world.git
oc expose svc/ruby-hello-world
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="2"&gt;
&lt;li&gt;ç­‰å¾…åˆå§‹æ„å»ºå®Œæˆå¹¶é€šè¿‡routeæ¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„é¡µé¢ã€‚ä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ªæ¬¢è¿é¡µé¢ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc get route ruby-hello-world
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="3"&gt;
&lt;li&gt;åœ¨æœ¬åœ°å…‹éš†å­˜å‚¨åº“ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/openshift/ruby-hello-world.git
&lt;span class="nb"&gt;cd&lt;/span&gt; ruby-hello-world
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="4"&gt;
&lt;li&gt;
&lt;p&gt;æ›´æ”¹åº”ç”¨ç¨‹åºçš„è§†å›¾ã€‚ä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–è¾‘å™¨ç¼–è¾‘ &lt;code&gt;views/main.rb&lt;/code&gt;ï¼šå°†&lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt;æ ‡ç­¾æ›´æ”¹ä¸º&lt;code&gt;&amp;lt;body style="background-color:blue"&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨æœ¬åœ°ä¿®æ”¹çš„æºå¯åŠ¨æ–°æ„å»ºã€‚åœ¨å­˜å‚¨åº“çš„æœ¬åœ°ç›®å½•ä¸­ï¼Œè¿è¡Œï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc start-build ruby-hello-world --from-dir&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.&amp;quot;&lt;/span&gt; --follow
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ„å»ºå®Œæˆå¹¶é‡æ–°éƒ¨ç½²åº”ç”¨ç¨‹åºåï¼ŒæŒ‡å‘åº”ç”¨ç¨‹åºä¸»æœºçš„routeåº”è¯¥ä¼šç”Ÿæˆä¸€ä¸ªè“è‰²èƒŒæ™¯çš„é¡µé¢ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥ç»§ç»­åœ¨æœ¬åœ°è¿›è¡Œæ›´æ”¹å¹¶ä½¿ç”¨&lt;code&gt;oc start-build --from-dir&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨è¿˜å¯ä»¥åˆ›å»ºä»£ç åˆ†æ”¯ï¼Œåœ¨æœ¬åœ°æäº¤æ›´æ”¹ï¼Œå¹¶ä½¿ç”¨å­˜å‚¨åº“çš„HEADä½œä¸ºæ„å»ºçš„æºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git checkout -b my_branch
git add .
git commit -m &lt;span class="s2"&gt;&amp;quot;My changes&amp;quot;&lt;/span&gt;
oc start-build ruby-hello-world --from-repo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.&amp;quot;&lt;/span&gt; --follow
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="_6"&gt;æ•™ç¨‹ï¼šæ„å»ºç§æœ‰ä»£ç &lt;a class="headerlink" href="#_6" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªæœ¬åœ°ç›®å½•æ¥ä¿å­˜æ‚¨çš„ä»£ç ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir myapp
&lt;span class="nb"&gt;cd&lt;/span&gt; myapp
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="2"&gt;
&lt;li&gt;åœ¨ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º&lt;code&gt;Dockerfile&lt;/code&gt;çš„æ–‡ä»¶ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; centos:centos7&lt;/span&gt;
&lt;span class="k"&gt;EXPOSE&lt;/span&gt;&lt;span class="s"&gt; 8080&lt;/span&gt;
&lt;span class="k"&gt;COPY&lt;/span&gt; index.html /var/run/web/index.html
&lt;span class="k"&gt;CMD&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /var/run/web &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; python -m SimpleHTTPServer &lt;span class="m"&gt;8080&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="3"&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª&lt;code&gt;index.html&lt;/code&gt;æ–‡ä»¶ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;My local app&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Hello World&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;This is my local application&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="4"&gt;
&lt;li&gt;ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ–°çš„æ„å»ºï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc new-build --strategy docker --binary --docker-image centos:centos7 --name myapp
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="5"&gt;
&lt;li&gt;ä½¿ç”¨æœ¬åœ°ç›®å½•çš„å†…å®¹å¯åŠ¨äºŒè¿›åˆ¶æ„å»ºï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc start-build myapp --from-dir . --follow
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="6"&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;new-app&lt;/code&gt;éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œç„¶åä¸ºå…¶åˆ›å»ºè·¯ç”±ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc new-app myapp
oc expose svc/myapp
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="7"&gt;
&lt;li&gt;è·å–æŒ‡å‘å¯¹åº”åº”ç”¨ä¸»æœºçš„è·¯ç”±ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc get route myapp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨æ„å»ºå’Œéƒ¨ç½²ä»£ç ä¹‹åï¼Œæ‚¨å¯ä»¥é€šè¿‡æ›´æ”¹æœ¬åœ°æ–‡ä»¶å¹¶é€šè¿‡&lt;code&gt;oc start-build myapp --from-dir&lt;/code&gt;å†æ¬¡è°ƒç”¨å¯åŠ¨æ–°æ„å»ºæ¥è¿›è¡Œè¿­ä»£ã€‚æ„å»ºå®Œæˆåï¼Œä»£ç å°†è‡ªåŠ¨éƒ¨ç½²ï¼Œæ›´æ–°çš„å†…å®¹å°†åœ¨åˆ·æ–°é¡µé¢æ—¶åæ˜ åœ¨æµè§ˆå™¨ä¸­ã€‚&lt;/p&gt;
&lt;h3 id="pipeline"&gt;æ•™ç¨‹ï¼šæ¥è‡ª pipeline çš„äºŒè¿›åˆ¶å·¥ä»¶&lt;a class="headerlink" href="#pipeline" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;OpenShiftä¸Šçš„Jenkinså…è®¸ä½¿ç”¨å¸¦æœ‰åˆé€‚å·¥å…·çš„slaveé•œåƒæ¥æ„å»ºä»£ç ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨&lt;code&gt;maven&lt;/code&gt; slaveé•œåƒæ¥ä»ä»£ç å­˜å‚¨åº“æ„å»ºWARåŒ…ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦æ„å»ºäº†æ­¤å·¥ä»¶ï¼Œæ‚¨éœ€è¦å°†å…¶æäº¤åˆ°åŒ…å«æ­£ç¡®çš„è¿è¡Œæ—¶å·¥ä»¶çš„é•œåƒä»¥è¿è¡Œæ‚¨çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶æ„å»ºå°†è¿™äº›å·¥ä»¶æ·»åŠ åˆ°è¿è¡Œæ—¶æ˜ åƒã€‚åœ¨ä¸‹é¢çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªJenkins pipelineï¼Œè¯¥pipelineä½¿ç”¨&lt;code&gt;maven&lt;/code&gt; slaveæ„å»ºWARï¼Œç„¶åä½¿ç”¨å¸¦æœ‰&lt;code&gt;Dockerfile&lt;/code&gt;çš„äºŒè¿›åˆ¶æ„å»ºå°†WARæ·»åŠ åˆ° wildfly è¿è¡Œæ—¶æ˜ åƒã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir mavenapp
&lt;span class="nb"&gt;cd&lt;/span&gt; mavenapp
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="2"&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª&lt;code&gt;Dockerfile&lt;/code&gt;å°†WARå¤åˆ¶åˆ°wildflyé•œåƒå†…çš„é€‚å½“ä½ç½®ä»¥ä¾›æ‰§è¡Œã€‚å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°åä¸ºçš„æœ¬åœ°æ–‡ä»¶ &lt;code&gt;Dockerfile&lt;/code&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; wildfly:latest&lt;/span&gt;
&lt;span class="k"&gt;COPY&lt;/span&gt; ROOT.war /wildfly/standalone/deployments/ROOT.war
&lt;span class="k"&gt;CMD&lt;/span&gt;  &lt;span class="nv"&gt;$STI_SCRIPTS_PATH&lt;/span&gt;/run
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="3"&gt;
&lt;li&gt;ä¸ºè¯¥&lt;code&gt;Dockerfile&lt;/code&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„BuildConfigï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="â—" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/2757.png" title=":exclamation:" width="20px"&gt;&lt;/p&gt;
&lt;p&gt;è¿™å°†è‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªæ„å»º, åˆšå¼€å§‹ä¼šæ„å»ºå¤±è´¥ï¼Œå› ä¸º &lt;code&gt;ROOT.war&lt;/code&gt;å·¥ä»¶å°šä¸å¯ç”¨ã€‚ä¸‹é¢çš„pipelineå°†ä½¿ç”¨äºŒè¿›åˆ¶æ„å»ºå°†è¯¥WARåŒ…ä¼ é€’ç»™æ„å»ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat Dockerfile &lt;span class="p"&gt;|&lt;/span&gt; oc new-build -D - --name mavenapp
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="4"&gt;
&lt;li&gt;åˆ›å»º1ä¸ªä½¿ç”¨Jenkins pipelineçš„BuildConfig, è¿™ä¸ªBuildConfigå°†æ„å»º1ä¸ªWARåŒ…ï¼Œç„¶åä½¿ç”¨è¯¥WARåŒ…å’Œå…ˆå‰åˆ›å»ºçš„&lt;code&gt;Dockerfile&lt;/code&gt;æ¥æ„å»ºé•œåƒã€‚ç›¸åŒçš„æ¨¡å¼å¯ç”¨äºå…¶ä»–å¹³å°ï¼Œå…¶ä¸­äºŒè¿›åˆ¶å·¥ä»¶ç”±ä¸€ç»„å·¥å…·æ„å»ºï¼Œç„¶åä¸æœ€ç»ˆçš„åŒ…å«ä¸åŒè¿è¡Œæ—¶çš„é•œåƒç»„åˆã€‚å°†ä»¥ä¸‹ä»£ç ä¿å­˜åˆ°&lt;code&gt;mavenapp-pipeline.yml&lt;/code&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;apiVersion&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;v1&lt;/span&gt;
&lt;span class="nt"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;BuildConfig&lt;/span&gt;
&lt;span class="nt"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mavenapp-pipeline&lt;/span&gt;
&lt;span class="nt"&gt;spec&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;strategy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;jenkinsPipelineStrategy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;jenkinsfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;|-&lt;/span&gt;
        &lt;span class="no"&gt;pipeline {&lt;/span&gt;
          &lt;span class="no"&gt;agent { label &amp;quot;maven&amp;quot; }&lt;/span&gt;
          &lt;span class="no"&gt;stages {&lt;/span&gt;
            &lt;span class="no"&gt;stage(&amp;quot;Clone Source&amp;quot;) {&lt;/span&gt;
              &lt;span class="no"&gt;steps {&lt;/span&gt;
                &lt;span class="no"&gt;checkout([$class: &amp;#39;GitSCM&amp;#39;,&lt;/span&gt;
                            &lt;span class="no"&gt;branches: [[name: &amp;#39;*/master&amp;#39;]],&lt;/span&gt;
                            &lt;span class="no"&gt;extensions: [&lt;/span&gt;
                              &lt;span class="no"&gt;[$class: &amp;#39;RelativeTargetDirectory&amp;#39;, relativeTargetDir: &amp;#39;mavenapp&amp;#39;]&lt;/span&gt;
                            &lt;span class="no"&gt;],&lt;/span&gt;
                            &lt;span class="no"&gt;userRemoteConfigs: [[url: &amp;#39;https://github.com/openshift/openshift-jee-sample.git&amp;#39;]]&lt;/span&gt;
                        &lt;span class="no"&gt;])&lt;/span&gt;
              &lt;span class="no"&gt;}&lt;/span&gt;
            &lt;span class="no"&gt;}&lt;/span&gt;
            &lt;span class="no"&gt;stage(&amp;quot;Build WAR&amp;quot;) {&lt;/span&gt;
              &lt;span class="no"&gt;steps {&lt;/span&gt;
                &lt;span class="no"&gt;dir(&amp;#39;mavenapp&amp;#39;) {&lt;/span&gt;
                  &lt;span class="no"&gt;sh &amp;#39;mvn clean package -Popenshift&amp;#39;&lt;/span&gt;
                &lt;span class="no"&gt;}&lt;/span&gt;
              &lt;span class="no"&gt;}&lt;/span&gt;
            &lt;span class="no"&gt;}&lt;/span&gt;
            &lt;span class="no"&gt;stage(&amp;quot;Build Image&amp;quot;) {&lt;/span&gt;
              &lt;span class="no"&gt;steps {&lt;/span&gt;
                &lt;span class="no"&gt;dir(&amp;#39;mavenapp/target&amp;#39;) {&lt;/span&gt;
                  &lt;span class="no"&gt;sh &amp;#39;oc start-build mavenapp --from-dir . --follow&amp;#39;&lt;/span&gt;
                &lt;span class="no"&gt;}&lt;/span&gt;
              &lt;span class="no"&gt;}&lt;/span&gt;
            &lt;span class="no"&gt;}&lt;/span&gt;
          &lt;span class="no"&gt;}&lt;/span&gt;
        &lt;span class="no"&gt;}&lt;/span&gt;
    &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;JenkinsPipeline&lt;/span&gt;
  &lt;span class="nt"&gt;triggers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;[]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="5"&gt;
&lt;li&gt;åˆ›å»ºpipeline æ„å»ºã€‚å¦‚æœJenkinsæœªéƒ¨ç½²åˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼Œåˆ™ä½¿ç”¨ç®¡é“åˆ›å»ºçš„BuildConfigä¼šå…ˆéƒ¨ç½²Jenkinsã€‚åœ¨Jenkinså‡†å¤‡å»ºç«‹æ‚¨çš„ç®¡é“ä¹‹å‰å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ¥å¯åŠ¨ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨&lt;code&gt;oc rollout status dc/jenkins&lt;/code&gt;æ¥æ£€æŸ¥Jenkinsçš„çŠ¶æ€ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc create -f ./mavenapp-pipeline.yml
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="6"&gt;
&lt;li&gt;ä¸€æ—¦Jenkinså‡†å¤‡å°±ç»ªï¼Œå¯åŠ¨ä¹‹å‰å®šä¹‰çš„ç®¡é“ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc start-build mavenapp-pipeline
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="7"&gt;
&lt;li&gt;ç®¡é“æ„å»ºå®Œæˆåï¼Œä½¿ç”¨&lt;code&gt;new-app&lt;/code&gt;éƒ¨ç½²æ–°åº”ç”¨ç¨‹åºå¹¶å…¬å¼€å…¶routeï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc new-app mavenapp
oc expose svc/mavenapp
&lt;/pre&gt;&lt;/div&gt;


&lt;ol start="8"&gt;
&lt;li&gt;ä½¿ç”¨æµè§ˆå™¨ï¼Œå¯¼èˆªåˆ°åº”ç”¨ç¨‹åºçš„è·¯å¾„ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oc get route mavenapp
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">ä¸œé£å¾®é¸£</dc:creator><pubDate>Wed, 08 May 2019 18:41:34 +0800</pubDate><guid isPermaLink="false">tag:www.ewhisper.cn,2019-05-08:/binary-builds-with-openshift.html</guid><category>openshift</category><category>docker</category><category>devops</category><category>git</category><category>containers</category></item><item><title>è…¾è®¯äº‘æœåŠ¡å™¨åˆå§‹åŒ–æ“ä½œ</title><link>https://www.EWhisper.cn/initialize-my-tencentyun-server.html</link><description>&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;é‡è£…ç³»ç»Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;è®¾ç½®ç›‘æ§å‘Šè­¦&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;åˆ›å»ºå¯†é’¥å¹¶ç»‘å®šä¸»æœº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;å®‰å…¨ç»„é…ç½®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#centos-75"&gt;CentOS 7.5 ä¼˜åŒ–é…ç½®&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_5"&gt;ç”¨æˆ·/ç™»å½•ç›¸å…³ä¼˜åŒ–&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_6"&gt;æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#git"&gt;å®‰è£…åŠé…ç½® Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#shell"&gt;ä¼˜åŒ–é…ç½®shell&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#using-oh-my-zsh"&gt;Using Oh My Zsh&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#plugins"&gt;Plugins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#themes"&gt;Themes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="_1"&gt;é‡è£…ç³»ç»Ÿ&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"&gt; è¯´æ˜:&lt;/p&gt;
&lt;p&gt;å› ä¸ºæˆ‘ä¹°çš„æ—¶å€™, CentOSæœ€æ–°åªæä¾›åˆ°7.3, æˆ‘å¸Œæœ›ä½¿ç”¨CentOS 7.5. çœ‹åˆ°é•œåƒåº“é‡Œæœ‰(ä»€ä¹ˆæ¯›ç—…, ä¹°çš„æ—¶å€™ä¸ºå•¥ä¸æä¾›&lt;img align="absmiddle" alt="ğŸ˜•" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f615.png" title=":confused:" width="20px"&gt;&lt;img align="absmiddle" alt="ğŸ˜•" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f615.png" title=":confused:" width="20px"&gt;&lt;img align="absmiddle" alt="ğŸ˜•" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f615.png" title=":confused:" width="20px"&gt;), æ‰€ä»¥é‡æ–°å®‰è£…ä¸‹ç³»ç»Ÿ.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;é€‰ä¸­å®ä¾‹, ç‚¹å‡»&lt;strong&gt;æ›´å¤š&lt;/strong&gt;, é€‰æ‹©&lt;strong&gt;é‡è£…ç³»ç»Ÿ&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="é‡è£…ç³»ç»Ÿ" src="./images/init_tencentyun_install_os_1.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‰æ‹©&lt;strong&gt;å…¬å…±é•œåƒ&lt;/strong&gt; -&amp;gt; &lt;strong&gt;CentOS&lt;/strong&gt; -&amp;gt; &lt;strong&gt;CentOS 7.5 64ä½&lt;/strong&gt; -&amp;gt; è¾“å…¥rootå¯†ç . ç‚¹å‡»&lt;strong&gt;å¼€å§‹é‡è£…&lt;/strong&gt;. å¦‚ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="é‡è£…ç³»ç»Ÿå…·ä½“é€‰é¡¹" src="./images/init_tencentyun_install_os_2.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç­‰å¾…é‡è£…å®Œæ¯•å³å¯.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_2"&gt;è®¾ç½®ç›‘æ§å‘Šè­¦&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç‚¹å‡»&lt;strong&gt;ç›‘æ§&lt;/strong&gt;å›¾æ ‡:&lt;/p&gt;
&lt;p&gt;&lt;img alt="ç‚¹å‡»ç›‘æ§" src="./images/init_tencentyun_monitor_1.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ‰ä»¥ä¸‹ç›‘æ§æŒ‡æ ‡, å¦‚ä¸‹å›¾, ç‚¹å‡»&lt;strong&gt;è®¾ç½®å‘Šè­¦&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;CPU&lt;/li&gt;
&lt;li&gt;å†…å­˜&lt;/li&gt;
&lt;li&gt;å®½å¸¦(å†…å¤–ç½‘)&lt;/li&gt;
&lt;li&gt;ç£ç›˜IO&lt;/li&gt;
&lt;li&gt;åˆ†åŒºä½¿ç”¨è¯·çœ‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="è®¾ç½®å‘Šè­¦" src="./images/init_tencentyun_monitor_2.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¹æ®è‡ªå·±çš„éœ€è¦, å®šåˆ¶å‘Šè­¦ç­–ç•¥. ç¤ºä¾‹å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img alt="å‘Šè­¦ç­–ç•¥" src="./images/init_tencentyun_monitor_3.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¦é…ç½®å‘Šè­¦é€šçŸ¥æ¸ é“, éœ€è¦å…ˆ&lt;strong&gt;æ–°å¢ç”¨æˆ·ç»„&lt;/strong&gt;. å¦‚ä¸‹(æˆ‘å’Œå…¶ä»–äººåˆç”¨, æ‰€ä»¥å»ºç«‹ä¸€ä¸ªç”¨æˆ·ç»„è¿˜æ˜¯æœ‰å¿…è¦çš„):&lt;/p&gt;
&lt;p&gt;&lt;img alt="æ–°å¢ç”¨æˆ·ç»„" src="./images/init_tencentyun_monitor_4.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–°å¢ç”¨æˆ·ç»„çš„æ“ä½œå¦‚ä¸‹, å…ˆç›´æ¥ä½¿ç”¨é¢„è®¾ç­–ç•¥ - ç®¡ç†å‘˜å°±å¯ä»¥äº†.&lt;/p&gt;
&lt;p&gt;&lt;img alt="æ–°å¢ç”¨æˆ·ç»„" src="./images/init_tencentyun_groupuser_3.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¥ä¸‹æ¥å…³è”åˆ°å…·ä½“çš„ç”¨æˆ·ç»„&lt;/p&gt;
&lt;p&gt;&lt;img alt="å…³è”æ¥å—ç»„" src="./images/init_tencentyun_monitor_5.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç‚¹å‡»&lt;strong&gt;å®Œæˆ&lt;/strong&gt;, é…ç½®å®Œæˆåå¦‚ä¸‹æ‰€ç¤º: (å¯ä»¥æŠŠé»˜è®¤çš„ç¦ç”¨æ‰äº†)&lt;/p&gt;
&lt;p&gt;&lt;img alt="å‘Šè­¦ç­–ç•¥" src="./images/init_tencentyun_monitor_6.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_3"&gt;åˆ›å»ºå¯†é’¥å¹¶ç»‘å®šä¸»æœº&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åœ¨&lt;strong&gt;SSHå¯†é’¥&lt;/strong&gt; èœå•, ç‚¹å‡»&lt;strong&gt;åˆ›å»ºå¯†é’¥&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="åˆ›å»ºå¯†é’¥" src="./images/init_tencentyun_key_1.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå¯†é’¥(&lt;img align="absmiddle" alt="â—" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/2757.png" title=":exclamation:" width="20px"&gt;  å¯†é’¥è¯·å¦¥å–„ä¿å­˜, å‹¿å¤–ä¼ ).&lt;/p&gt;
&lt;p&gt;&lt;img alt="åˆ›å»ºå¯†é’¥" src="./images/init_tencentyun_key_2.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå, å…ˆå…³é—­ä¸»æœº(å…³é—­åçš„ä¸»æœºæ‰èƒ½ç»‘å®šå¯†é’¥, å¾ˆå¥½, å…³æœºä¹Ÿå—åˆ°å‘Šè­¦äº†ğŸ‘Œ), å†é€‰æ‹©&lt;strong&gt;ç»‘å®š/è§£ç»‘å®ä¾‹&lt;/strong&gt;, å¦‚ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="ç»‘å®šå®ä¾‹" src="./images/init_tencentyun_key_3.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_4"&gt;å®‰å…¨ç»„é…ç½®&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"&gt; å¤‡æ³¨:&lt;/p&gt;
&lt;p&gt;ç±»ä¼¼äºé˜²ç«å¢™æƒé™.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç‚¹å‡»&lt;strong&gt;å®‰å…¨ç»„&lt;/strong&gt; -&amp;gt; &lt;strong&gt;æ–°å»º&lt;/strong&gt;. å¦‚ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="æ–°å»ºå®‰å…¨ç»„" src="./images/init_tencentyun_securegroup_1.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‰æ‹©&lt;strong&gt;ç«‹å³è®¾ç½®è§„åˆ™&lt;/strong&gt;. å…·ä½“åŸå› å¦‚ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="è®¾ç½®è§„åˆ™" src="./images/init_tencentyun_securegroup_2.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ä»¥å…ˆå…³è”åˆ°æˆ‘è‡ªå·±çš„äº‘ä¸»æœºå®ä¾‹. å¦‚ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img alt="å…³è”åˆ°å®ä¾‹" src="./images/init_tencentyun_securegroup_3.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åå†é…ç½®å‡º/å…¥ç«™è§„åˆ™, å…ˆé…ç½®å…¥ç«™, å…ˆé€‰æ‹©&lt;strong&gt;ä¸€é”®æ”¾é€š&lt;/strong&gt;. æ”¾é€šä»¥ä¸‹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Linux SSHç™»å½•: 22ç«¯å£&lt;/li&gt;
&lt;li&gt;Windowsç™»å½•: 3389&lt;/li&gt;
&lt;li&gt;ping: ICMPåè®®&lt;/li&gt;
&lt;li&gt;HTTP: 80&lt;/li&gt;
&lt;li&gt;HTTPS: 443&lt;/li&gt;
&lt;li&gt;FTP: 20å’Œ21&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="ä¸€é”®æ”¾é€šå…¥ç«™" src="./images/init_tencentyun_securegroup_4.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†æ ¹æ®è‡ªå·±éœ€è¦æ·»åŠ è§„åˆ™, å¦‚ä¸‹: (æ”¾é€šTCPçš„8000ç«¯å£)&lt;/p&gt;
&lt;p&gt;&lt;img alt="è‡ªå®šä¹‰è§„åˆ™" src="./images/init_tencentyun_securegroup_5.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€åé…ç½®å‡ºç«™è§„åˆ™, é€‰æ‹©&lt;strong&gt;ä¸€é”®æ”¾é€š&lt;/strong&gt;. ä»¥åå†æ…¢æ…¢ç»†åŒ–, å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img alt="ä¸€é”®æ”¾é€šå‡ºæ ˆ" src="./images/init_tencentyun_securegroup_6.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è‡³æ­¤, æ§åˆ¶å°ä¸Šè¯¥é…ç½®çš„å°±é…ç½®çš„å·®ä¸å¤šäº†, æ¥ä¸‹æ¥ç™»å½•ä¸»æœºè¿›è¡Œé…ç½®.&lt;/p&gt;
&lt;h2 id="centos-75"&gt;CentOS 7.5 ä¼˜åŒ–é…ç½®&lt;a class="headerlink" href="#centos-75" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="_5"&gt;ç”¨æˆ·/ç™»å½•ç›¸å…³ä¼˜åŒ–&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4&gt;åˆ›å»ºæ™®é€šç”¨æˆ· åŸºäºå…¬é’¥ç™»å½•&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºæ™®é€šç”¨æˆ·: &lt;code&gt;useradd -m  -p yourpassword casey&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ™®é€šç”¨æˆ·åŸºäºå…¬é’¥ç™»å½•: (å› ä¸ºä¹‹å‰&lt;strong&gt;åˆ›å»ºå¯†é’¥å¹¶ç»‘å®šä¸»æœº&lt;/strong&gt;, å…¬é’¥å·²ç»å­˜åœ¨äºä¸»æœºä¸Šäº†, æ‰€ä»¥ä¸éœ€è¦keygenäº†, ç›´æ¥å¤åˆ¶å°±å¯ä»¥äº†)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cp /root/.ssh/authorized_keys /home/casey/.ssh &amp;amp;&amp;amp; chown -R casey:casey /home/casey/.ssh/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¡®è®¤åŸºäºsshå…¬é’¥çš„ç™»å½•æ˜¯å¦å·¥ä½œ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img align="absmiddle" alt="ğŸ““" class="emojione" height="20px" src="https://cdn.jsdelivr.net/emojione/assets/4.0/png/64/1f4d3.png" title=":notebook:" width="20px"&gt; å¤‡æ³¨:&lt;/p&gt;
&lt;p&gt;å®Œæ•´çš„&lt;strong&gt;åŸºäºå…¬é’¥&lt;/strong&gt;ç™»å½•çš„æ­¥éª¤å¦‚ä¸‹: (å‰ææ˜¯åˆšå¼€å§‹è¯¥è´¦æˆ·èƒ½é€šè¿‡è´¦å·å¯†ç æ–¹å¼ç™»å½•)&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨äº‘ä¸»æœºä¸Šåˆ›å»ºæ™®é€šç”¨æˆ·: &lt;code&gt;useradd -m -p yourpassword hellowordomain&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ ssh-keygenå‘½ä»¤åœ¨äº‘ä¸»æœºä¸Šåˆ›å»ºå¯†åŒ™å¯¹: &lt;code&gt;ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa_tencent_$(date +%Y-%m-%d) -C "tencent key for hellowordomain"&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ ssh-copy-id å‘½ä»¤å®‰è£…å…¬åŒ™ï¼š&lt;code&gt;ssh-copy-id -i /path/to/public-key-file user@host&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç¡®è®¤åŸºäºsshå…¬é’¥çš„ç™»å½•æ˜¯å¦å·¥ä½œ&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h4&gt;æ™®é€šç”¨æˆ·é…ç½®sudoæƒé™&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ CentOS/RHEL ç³»ç»Ÿä¸­å¦‚ä½•å°†ç”¨æˆ· vivek æ·»åŠ åˆ° sudo ç»„ä¸­&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ CentOS/RHEL å’Œ Fedora ç³»ç»Ÿä¸­å…è®¸ wheel ç»„ä¸­çš„ç”¨æˆ·æ‰§è¡Œæ‰€æœ‰çš„å‘½ä»¤ã€‚ä½¿ç”¨ usermod å‘½ä»¤å°†ç”¨æˆ· vivek æ·»åŠ åˆ° wheel ç»„ä¸­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo usermod -aG wheel vivek
$ id vivek
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;sudoæ— éœ€è¾“å…¥å¯†ç &lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# rootç”¨æˆ·&lt;/span&gt;
visudo

&lt;span class="c1"&gt;# ä¿®æ”¹å¦‚ä¸‹å†…å®¹åä¿å­˜é€€å‡º&lt;/span&gt;
&lt;span class="c1"&gt;## Allows people in group wheel to run all commands&lt;/span&gt;
&lt;span class="c1"&gt;# %wheel        ALL=(ALL)       ALL&lt;/span&gt;

&lt;span class="c1"&gt;## Same thing without a password&lt;/span&gt;
%wheel  &lt;span class="nv"&gt;ALL&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;ALL&lt;span class="o"&gt;)&lt;/span&gt;       NOPASSWD: ALL
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æµ‹è¯•å¹¶ç¡®ä¿ç”¨æˆ· vivek å¯ä»¥ä»¥ root èº«ä»½ç™»å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo -i  &lt;span class="c1"&gt;# åˆ‡æ¢åˆ°rootç”¨æˆ·&lt;/span&gt;
sudo systemctl status sshd  &lt;span class="c1"&gt;# æŸ¥çœ‹sshdçš„çŠ¶æ€&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;&lt;code&gt;sshd_config&lt;/code&gt; ä¼˜åŒ–&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ç¦ç”¨rootç™»å½•
PermitRootLogin no
ChallengeResponseAuthentication no
PasswordAuthentication no
UsePAM no
# ç¦ç”¨å¯†ç ç™»å½• ä»…ç•™ä¸‹å…¬åŒ™ç™»å½•
AuthenticationMethods publickey
PubkeyAuthentication yes
# ç¦ç”¨ç©ºå¯†ç 
PermitEmptyPasswords no
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€åæµ‹è¯• &lt;code&gt;sshd_config&lt;/code&gt; æ–‡ä»¶å¹¶é‡å¯/é‡æ–°åŠ è½½ SSH æœåŠ¡&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo sshd -t
sudo systemctl restart sshd.service
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="_6"&gt;æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo yum upgrade -y  &lt;span class="c1"&gt;# å‡çº§æ‰€æœ‰è½¯ä»¶&lt;/span&gt;
sudo yum clean all -y  &lt;span class="c1"&gt;# æ¸…ç†ç¼“å­˜&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="git"&gt;å®‰è£…åŠé…ç½® Git&lt;a class="headerlink" href="#git" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…Git&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo yum install -y --setopt=tsflags=nodocs git&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é…ç½®git&lt;/p&gt;
&lt;p&gt;&lt;code&gt;git config --global user.name "east4ming"&lt;/code&gt;&lt;br&gt;
&lt;code&gt;git config --global user.email "cuikaidong@foxmail.com"&lt;/code&gt;&lt;br&gt;
&lt;code&gt;ssh-keygen -t rsa -b 4096 -C "cuikaidong@foxmail.com"  # å·²æœ‰ç§é’¥ä¹Ÿå¯ä»¥é‡å¤ä½¿ç”¨&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;cat .ssh/id_rsa.pub&lt;/code&gt; å¹¶å¤åˆ¶ (id_rsa.pubæ˜¯å¯¹åº”çš„å…¬é’¥ä¿¡æ¯)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;æ‰“å¼€githubç½‘é¡µç™»å…¥è´¦æˆ·è¿›å…¥è´¦æˆ·settingså·¦è¾¹æ‰¾åˆ°SSHï¼Œå¯ä»¥æ¸…ç†ä¸€ä¸‹æ²¡ç”¨çš„SSH keysï¼Œç„¶åæ–°å»ºä¸€ä¸ª ï¼Œå–åä»»æ„ï¼Œç²˜è´´è¿›å»catäº§ç”Ÿçš„æ‰€æœ‰å­—ç¬¦ã€‚ä¿å­˜å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼“å­˜HTTPSæ–¹å¼çš„å¯†ç : &lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ git config --global credential.helper 'cache --timeout=3600'  # Set the cache to timeout after 1 hour (setting is in seconds)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="shell"&gt;ä¼˜åŒ–é…ç½®shell&lt;a class="headerlink" href="#shell" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4&gt;å®‰è£…zsh&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo yum install -y --setopt&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;tsflags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nodocs zsh
zsh --version
sudo chsh -s &lt;span class="k"&gt;$(&lt;/span&gt;which zsh&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# æ³¨é”€&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®‰è£…powerline&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install powerline-status --user
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;å®‰è£…&lt;a href="https://github.com/robbyrussell/oh-my-zsh"&gt;&lt;strong&gt;oh-my-zsh&lt;/strong&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh -c &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="using-oh-my-zsh"&gt;Using Oh My Zsh&lt;a class="headerlink" href="#using-oh-my-zsh" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸‹å†…å®¹æ¥è‡ª oh-my-zsh github&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="plugins"&gt;Plugins&lt;a class="headerlink" href="#plugins" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Oh My Zsh comes with a shitload of plugins to take advantage of. You can take a look in the &lt;a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins"&gt;plugins&lt;/a&gt; directory and/or the &lt;a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins"&gt;wiki&lt;/a&gt;to see what's currently available.&lt;/p&gt;
&lt;h4&gt;Enabling Plugins&lt;/h4&gt;
&lt;p&gt;Once you spot a plugin (or several) that you'd like to use with Oh My Zsh, you'll need to enable them in the &lt;code&gt;.zshrc&lt;/code&gt; file. You'll find the zshrc file in your &lt;code&gt;$HOME&lt;/code&gt; directory. Open it with your favorite text editor and you'll see a spot to list all the plugins you want to load.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vi ~/.zshrc
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;For example, this might begin to look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;plugins=(
git
bundler
dotenv
osx
rake
rbenv
ruby
)
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Using Plugins&lt;/h4&gt;
&lt;p&gt;Most plugins (should! we're working on this) include a &lt;strong&gt;README&lt;/strong&gt;, which documents how to use them.&lt;/p&gt;
&lt;h3 id="themes"&gt;Themes&lt;a class="headerlink" href="#themes" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;We'll admit it. Early in the Oh My Zsh world, we may have gotten a bit too theme happy. We have over one hundred themes now bundled. Most of them have &lt;a href="https://wiki.github.com/robbyrussell/oh-my-zsh/themes"&gt;screenshots&lt;/a&gt; on the wiki. Check them out!&lt;/p&gt;
&lt;h4&gt;Selecting a Theme&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;Robby's theme is the default one. It's not the fanciest one. It's not the simplest one. It's just the right one (for him).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Once you find a theme that you'd like to use, you will need to edit the &lt;code&gt;~/.zshrc&lt;/code&gt; file. You'll see an environment variable (all caps) in there that looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;ZSH_THEME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;robbyrussell&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To use a different theme, simply change the value to match the name of your desired theme. For example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;ZSH_THEME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;agnoster&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;# (this is one of the fancy ones)&lt;/span&gt;
&lt;span class="c1"&gt;# see https://github.com/robbyrussell/oh-my-zsh/wiki/Themes#agnoster&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;Note: many themes require installing the Powerline Fonts in order to render properly.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Open up a new terminal window and your prompt should look something like this:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Agnoster theme" src="https://cloud.githubusercontent.com/assets/2618447/6316862/70f58fb6-ba03-11e4-82c9-c083bf9a6574.png"&gt;&lt;/p&gt;
&lt;p&gt;In case you did not find a suitable theme for your needs, please have a look at the wiki for &lt;a href="https://github.com/robbyrussell/oh-my-zsh/wiki/External-themes"&gt;more of them&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you're feeling feisty, you can let the computer select one randomly for you each time you open a new terminal window.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ZSH_THEME=&amp;quot;random&amp;quot; # (...please let it be pie... please be some pie..)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And if you want to pick random theme from a list of your favorite themes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ZSH_THEME_RANDOM_CANDIDATES=(
&amp;quot;robbyrussell&amp;quot;
&amp;quot;agnoster&amp;quot;
)
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">ä¸œé£å¾®é¸£</dc:creator><pubDate>Tue, 26 Mar 2019 21:09:00 +0800</pubDate><guid isPermaLink="false">tag:www.ewhisper.cn,2019-03-26:/initialize-my-tencentyun-server.html</guid><category>è…¾è®¯äº‘</category><category>äº‘</category><category>centos</category><category>ç›‘æ§</category><category>å‘Šè­¦</category><category>å¯è§‚å¯Ÿæ€§</category><category>å®‰å…¨</category><category>å¯†é’¥</category><category>git</category><category>shell</category></item></channel></rss>